{% extends 'base.html' %}

{% block title %}Groupr{% endblock %}
{% block head %}<script type="text/javascript" src="static/project/main.js"></script> {% endblock %}
{% block content %}

<div class="container">
	<div class="row">
        {% if user.is_authenticated %}
		<div class=" col-md-2 sidenav" v-show="logged_in">
            <div style="padding-left: 30px;">
                <span><h3>My Events</h3></span>
                <form action='/addevent/' method="post">
                    {% csrf_token %}
                    Add Code: <input type="text" name="code">
                </form>
    			<span v-for="(e, i) in events" :key='i'>
    				<a href='#' v-bind:class="{active: (!curr_type && i == curr_event)}" v-on:click="changeEvent(i, false)">${e.name}</a>
    			</span>
                <span><h3>Created Events</h3></span>
                <span v-for="(e, i) in my_events" :key='i'>
                    <a href='#' v-bind:class="{active: (curr_type && i == curr_event)}" v-on:click="changeEvent(i, true)">${e.name}</a>
                </span>
                <p>----------</p>
                <span><h3><a href="#">Join Event</a></h3></span>
                <span><h3><a href="/event/">Create Event</a></h3></span>
                <span><h3><a href="#">Edit Profile</a></h3></span>
                <span><h3><a href="/logout/">Sign Out</a></h3></span>
            </div>
		</div>
		<br><br>
		<div class="col-md-10">
                <br><br><br><br>
		    <center>
                <span v-if="curr_event != -1 && !curr_type">
                    <h1> ${events[curr_event].name} </h1>
                </span>
                <span v-else-if="curr_event != -1 && curr_type">
                    <h1> ${my_events[curr_event].name} </h1>
                    <br>
                    <h2>Add Code:  ${my_events[curr_event].addCode}</h2>
                </span>
                <span v-else>
                    <h1> You Don't Have Any Events </h1>
                </span>
                
                <br>
                <div v-if="!curr_type && curr_event != -1">
                    <h3>other user: ${suggested_usr_name} </h3>
                    <br>
                    <div v-if="suggested_usr_id != -1">
        		    	<button type="button" class="btn btn-primary btn-lg" v-on:click="accept">accept</button>
        		    	<button type="button" class="btn btn-primary btn-lg" v-on:click="decline">decline</button>
                    </div>
                </div>
		    </center>
		</div>
        {% else %}
        <div class="col-md-12">
            <center>
                <br><br><br>
                <h1 class="center">You are not logged in</h1>
                <br>
                <a type="button" class="btn btn-primary btn-lg" href="{% url 'login' %}" >Login</a>
                <a type="button" class="btn btn-primary btn-lg" href="{% url 'signup' %}" >Sign Up</a>
            </center>
        </div>
        {% endif %}
	</div>
</div>
{% endblock %}